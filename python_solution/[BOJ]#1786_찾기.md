<https://www.acmicpc.net/problem/1786>



### ğŸ“Œí’€ì´

----

#### ë‚´ê°€ ì“´ í’€ì´(ì„±ê³µ)

- KMP ì•Œê³ ë¦¬ì¦˜ í™œìš©
  - íŒ¨í„´ì„ ì²˜ë¦¬ í•˜ëŠ” ê³¼ì • `KMP_table`
  - KMP ì•Œê³ ë¦¬ì¦˜ì„ ì§„í–‰í•˜ëŠ” í•¨ìˆ˜ `KMP`
- `KMP_table`
  - ì ‘ë‘ì‚¬, ì ‘ë¯¸ì‚¬ì™€ ê´€ë ¨ëœ ì •ë³´ë¥¼ ì €ì¥í•˜ëŠ” í…Œì´ë¸”`tb`
  - ë‘ ê°œì˜ ì¸ë±ìŠ¤ `idx`, `pidx` í™œìš©
  - `idx`ì˜ ê°’ì„ ì¦ê°€ì‹œí‚¤ë©° ì§„í–‰
  - íŒ¨í„´ì˜ `idx` ê°’ê³¼ `pidx` ì—ì„œì˜ ì›ì†Œê°€ ë‹¤ë¥¸ ê²½ìš°
    - `pidx`ê°€ 0ì´ ë˜ê±°ë‚˜ ì›ì†Œê°€ ê°™ì•„ì§ˆë•Œê¹Œì§€ `pidx`ì˜ ê°’ì„ `tb`ì˜ ê°’ ê¸°ì¤€ìœ¼ë¡œ ë³€ê²½
  - ì›ì†Œê°€ ê°™ì€ ê²½ìš°, `pidx` 1 ì¦ê°€, `tb`ì˜ `idx` ìœ„ì¹˜ì— `pidx` ì €ì¥
  - ëª¨ë“  ì •ë³´ë¥¼ ì €ì¥ í›„ `tb` ë¥¼ ë¦¬í„´
- `KMP`
  - ì•ì„œ ì–¸ê¸‰í•œ `KMP_table`ê³¼ ìœ ì‚¬í•œ ë°©ì‹
  - `KMP_table`ì€ `idx`, `pidx`ë¥¼ ë‹¤ íŒ¨í„´ì—ì„œ í™œìš©í•˜ì˜€ë‹¤ë©´, `KMP` ì—ì„œëŠ” `idx`ë¥¼ ë‹¨ì–´ì—, `pidx`ë¥¼ íŒ¨í„´ì— í™œìš©
  - ì´ ë¬¸ì œì˜ ê²½ìš°, ê°€ëŠ¥í•œ ëª¨ë“  ê²½ìš°ì˜ ì‹œì‘ ì¸ë±ìŠ¤ë¥¼ ì°¾ì•„ì•¼ í•¨
    - `pidx`ê°€ ëê¹Œì§€ ì ‘ê·¼í•œ ê²½ìš°, ê·¸ ë•Œì˜ ì‹œì‘ ì¸ë±ìŠ¤ë¥¼ ê²°ê³¼ ë¦¬ìŠ¤íŠ¸ì— ì €ì¥, `pidx`ëŠ” `tb`ì˜ `pidx` ê°’ìœ¼ë¡œ ë³€ê²½

```python
# KMP ì•Œê³ ë¦¬ì¦˜ì„ ìˆ˜í–‰í•˜ê¸° ì „, íŒ¨í„´ì„ ì²˜ë¦¬í•˜ëŠ” í•¨ìˆ˜
# íŒ¨í„´ì˜ í…Œì´ë¸” ìƒì„±
def KMP_table(pattern):
    lp = len(pattern)
    tb = [0 for _ in range(lp)] # ì •ë³´ ì €ì¥ìš© í…Œì´ë¸”
    
    pidx = 0 # í…Œì´ë¸”ì˜ ê°’ì„ ë¶ˆëŸ¬ì˜¤ê³ , íŒ¨í„´ì˜ ì¸ë±ìŠ¤ì— ì ‘ê·¼
    for idx in range(1, lp): # í…Œì´ë¸”ì— ê°’ ì €ì¥í•˜ê¸° ìœ„í•´ í™œìš©í•˜ëŠ” ì¸ë±ìŠ¤
        # pidxê°€ 0ì´ ë˜ê±°ë‚˜, idxì™€ pidxì˜ pattern ì ‘ê·¼ ê°’ì´ ê°™ì•„ì§ˆë•Œê¹Œì§€ ì§„í–‰
        while pidx > 0 and pattern[idx] != pattern[pidx]:
            pidx = tb[pidx-1]
        
        # ê°’ì´ ì¼ì¹˜í•˜ëŠ” ê²½ìš°, pidx 1 ì¦ê°€ì‹œí‚¤ê³  ê·¸ ê°’ì„ tbì— ì €ì¥
        if pattern[idx] == pattern[pidx] :
            pidx += 1
            tb[idx] = pidx
    
    return tb


def KMP(word, pattern):
    # KMP_table í†µí•´ ì „ì²˜ë¦¬ëœ í…Œì´ë¸” ë¶ˆëŸ¬ì˜¤ê¸°
    table = KMP_table(pattern)
    
    results = [] # ê²°ê³¼ë¥¼ ë§Œì¡±í•˜ëŠ” ì¸ë±ìŠ¤ ì‹œì ì„ ê¸°ë¡í•˜ëŠ” ë¦¬ìŠ¤íŠ¸
    pidx = 0
    
    for idx in range(len(word)):
        # ë‹¨ì–´ì™€ íŒ¨í„´ì´ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš°, pidxë¥¼ tableì„ í™œìš©í•´ ê°’ ë³€ê²½
        while pidx > 0 and word[idx] != pattern[pidx] :
            pidx = table[pidx-1]
        # í•´ë‹¹ ì¸ë±ìŠ¤ì—ì„œ ê°’ì´ ì¼ì¹˜í•œë‹¤ë©´, pidxë¥¼ 1 ì¦ê°€ì‹œí‚´
        # ë§Œì•½ pidxê°€ íŒ¨í„´ì˜ ëê¹Œì§€ ë„ë‹¬í•˜ì˜€ë‹¤ë©´, ì‹œì‘ ì¸ë±ìŠ¤ ê°’ì„ ê³„ì‚°í•˜ì—¬ ì¶”ê°€ í›„ pidx ê°’ tableì˜ ì¸ë±ìŠ¤ì— ì ‘ê·¼í•˜ì—¬ ë³€ê²½
        if word[idx] == pattern[pidx]:
            if pidx == len(pattern)-1 :
                results.append(idx-len(pattern)+2)
                pidx = table[pidx]
            else:
                pidx += 1
    
    return results
        
word = input()
pattern = input()
result = KMP(word, pattern)
print(len(result))
print(*result)
```





### ğŸ“Œí›„ê¸°

---

`KMP ì•Œê³ ë¦¬ì¦˜`ì„ ì²˜ìŒ í™œìš©í•´ë³´ì•˜ë‹¤! ì´í•´ë¥¼ í•˜ê³ , í™œìš©ì„ í•˜ëŠ” ë° ì‹œê°„ì´ ì¡°ê¸ˆ ë§ì´ ê±¸ë ¸ë˜ ê²ƒ ê°™ë‹¤! ê·¸ë˜ë„ ë¬¸ìì—´ì„ íƒìƒ‰í•˜ëŠ” ê³¼ì •ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì•Œê³ ë¦¬ì¦˜ì´ í•˜ë‚˜ ëŠ˜ì–´ë‚˜ì„œ ë‚˜ì¤‘ì— ë˜ í™œìš©í•  ìˆ˜ ìˆì„ ê²ƒì´ë¼ê³  ìƒê°í•œë‹¤! 